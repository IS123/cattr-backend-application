<p-growl [(value)]="msgs"></p-growl>
<div class="container">
    <div class="row">
        <div class="col col-md-12">
            <div class="panel panel-default">
                <div class="panel-heading" translate>task.edit</div>
                <div class="panel-body">
                    <a routerLink="/tasks/list" title="Back">
                        <button class="btn btn-warning">
                            <i class="fa fa-arrow-left" aria-hidden="true"></i>
                            <span translate>control.back</span>
                        </button>
                    </a>
                    <div class="create-form">
                        <form (ngSubmit)="onSubmit()">
                            <div class="form-group row">
                                <label class="col-md-2" translate>field.project</label>
                                <div class="col-md-10">
                                    <ng-select
                                        [items]="projects"
                                        bindLabel="name"
                                        bindValue="id"
                                        placeholder="Select project"
                                        (change)="OnChangeSelectProject($event)"
                                        [(ngModel)]="selectedProject"
                                        [ngModelOptions]="{standalone: true}"
                                    >
                                    </ng-select>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-md-2" translate>field.name</label>
                                <div class="col-md-10">
                                    <input type="text" class="form-control" name="task-name" [(ngModel)]="item.task_name">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="col-md-2" translate>field.description</label>
                                <div class="col-md-10">
                                    <textarea  rows="5" class="form-control" name="task-description" [(ngModel)]="item.description"></textarea>
                                </div>
                            </div>
                            <div class="form-group row" *ngIf="users && users.length > 1">
                                <label class="col-md-2" translate>field.user</label>
                                <div class="col-md-10">
                                    <ng-select
                                            [items]="users"
                                            bindLabel="full_name"
                                            bindValue="id"
                                            placeholder="Select user"
                                            (change)="OnChangeSelectUser($event)"
                                            [(ngModel)]="selectedUser"
                                            [ngModelOptions]="{standalone: true}"
                                    >
                                    </ng-select>
                                </div>
                            </div>

                            <div class="form-group row">
                                <label class="col-md-2" translate>field.priority</label>
                                <div class="col-md-10">
                                    <select class="form-control" name="priority"
                                        [(ngModel)]="item.priority_id">
                                        <option *ngFor="let priority of internalPriorities" [value]="priority.id">
                                            {{ priority.name }}
                                        </option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-group row">
                                <label class="col-md-2" translate>
                                    <abbr title="{{ 'field.important-title' | translate }}"
                                        translate>field.important</abbr>
                                </label>
                                <div class="col-md-10">
                                    <input
                                        type="checkbox"
                                        name="important"
                                        [(ngModel)]="item.important"
                                        #important="ngModel"
                                        ng-true-value="1"
                                        ng-false-value="0">
                                </div>
                            </div>

                            <!--<div class="form-group row">-->
                                <!--<label class="col-md-2">Assigned by</label>-->
                                <!--<div class="col-md-10">-->
                                    <!--<input type="text" class="form-control" name="task-assigned-by" [(ngModel)]="item.assigned_by">-->
                                <!--</div>-->
                            <!--</div>-->
                            <button type="submit" class="btn btn-primary" translate>control.update</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>